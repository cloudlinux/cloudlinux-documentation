import{_ as s,S as n,n as o,p as l,a3 as t,q as r,J as i,C as d,A as c}from"./framework-3c337068.js";const u={};function m(h,e){const a=n("RouterLink");return o(),l("div",null,[e[2]||(e[2]=t('<h1 id="website-isolation-beta" tabindex="-1"><a class="header-anchor" href="#website-isolation-beta" aria-hidden="true">#</a> Website Isolation (BETA)</h1><h2 id="cagefs-per-domain" tabindex="-1"><a class="header-anchor" href="#cagefs-per-domain" aria-hidden="true">#</a> CageFS Per Domain</h2><p>Website Isolation is a security feature that provides domain-level isolation within CageFS. It allows server administrators to isolate individual websites from each other, even when they belong to the same hosting account. This prevents cross-site attacks where a compromised website could access files or data from other websites on the same account.</p><h3 id="overview" tabindex="-1"><a class="header-anchor" href="#overview" aria-hidden="true">#</a> Overview</h3><p>When Website Isolation is enabled for a domain:</p><ul><li>Each isolated website runs in its own isolated environment</li><li>PHP processes for isolated websites cannot access files from other websites</li><li>Crontab entries are automatically scoped to their respective document roots</li><li>Existing PHP processes are gracefully terminated and restarted in the isolated environment</li><li>Per-domain PHP Selector configuration is automatically set up (inheriting user-level settings)</li></ul><h3 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites" aria-hidden="true">#</a> Prerequisites</h3><h4 id="minimum-package-versions" tabindex="-1"><a class="header-anchor" href="#minimum-package-versions" aria-hidden="true">#</a> Minimum Package Versions</h4><table><thead><tr><th>Package</th><th>Minimum Version</th></tr></thead><tbody><tr><td>cagefs</td><td>7.6.29-1</td></tr><tr><td>lve (liblve)</td><td>2.2-1</td></tr><tr><td>lve-wrappers</td><td>0.7.13-1</td></tr><tr><td>alt-python27-cllib</td><td>3.4.33-1</td></tr></tbody></table><h4 id="compatible-php-handlers" tabindex="-1"><a class="header-anchor" href="#compatible-php-handlers" aria-hidden="true">#</a> Compatible PHP Handlers</h4><table><thead><tr><th>Handler</th><th>Status</th></tr></thead><tbody><tr><td>LSAPI</td><td>‚úÖ Supported (Recommended)</td></tr><tr><td>CGI</td><td>‚úÖ Supported</td></tr><tr><td>FPM</td><td>‚ö†Ô∏è Partially Supported - see <a href="#compatible-php-versions">Compatible PHP Versions</a></td></tr><tr><td>FCGI</td><td>üîú Coming in future releases</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">Warning</p><p>Website Isolation fully supports LSAPI and CGI handlers. FPM has partial support for specific ea-php versions only. FCGI support is planned for future releases.</p></div><h4 id="compatible-control-panels" tabindex="-1"><a class="header-anchor" href="#compatible-control-panels" aria-hidden="true">#</a> Compatible Control Panels</h4><table><thead><tr><th>Handler</th><th>Status</th></tr></thead><tbody><tr><td>cPanel</td><td>‚úÖ Supported</td></tr><tr><td>Plesk</td><td>üîú Coming in future releases</td></tr><tr><td>DirectAdmin</td><td>üîú Coming in future releases</td></tr><tr><td>Integration Scripts*</td><td>‚úÖ Supported</td></tr></tbody></table>',14)),r("p",null,[e[1]||(e[1]=i("*",-1)),d(a,{to:"/cloudlinuxos/control_panel_integration/#control-panel-api-integration"},{default:c(()=>e[0]||(e[0]=[i("Control Panel Integration",-1)])),_:1,__:[0]})]),e[3]||(e[3]=t(`<h4 id="compatible-php-versions" tabindex="-1"><a class="header-anchor" href="#compatible-php-versions" aria-hidden="true">#</a> Compatible PHP Versions</h4><p>Website Isolation provides partial FPM handler support for ea-php (cPanel). The following ea-php versions are compatible:</p><table><thead><tr><th>Package</th><th>Minimum Version</th></tr></thead><tbody><tr><td>ea-php56-php</td><td>5.6.40-25.cloudlinux.3</td></tr><tr><td>ea-php70-php</td><td>7.0.33-29.cloudlinux.3</td></tr><tr><td>ea-php71-php</td><td>7.1.33-20.cloudlinux.3</td></tr><tr><td>ea-php72-php</td><td>7.2.34-12.cloudlinux.3</td></tr><tr><td>ea-php73-php</td><td>7.3.33-15.cloudlinux.3</td></tr><tr><td>ea-php74-php</td><td>7.4.33-16.cloudlinux.1</td></tr><tr><td>ea-php80-php</td><td>8.0.30-9.cloudlinux.1</td></tr><tr><td>ea-php81-php</td><td>8.1.33-2.cloudlinux.3</td></tr><tr><td>ea-php82-php</td><td>8.2.29-2.cloudlinux.3</td></tr><tr><td>ea-php83-php</td><td>8.3.30-1.cloudlinux.1</td></tr><tr><td>ea-php84-php</td><td>8.4.17-1.cloudlinux.2</td></tr><tr><td>ea-php85-php</td><td>8.5.2-1.cloudlinux.1</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">Note</p><p>alt-php support is coming soon.</p></div><hr><h3 id="quick-start" tabindex="-1"><a class="header-anchor" href="#quick-start" aria-hidden="true">#</a> Quick Start</h3><p>Follow these steps to enable Website Isolation for a domain:</p><p><strong>1. Allow the feature server-wide (administrator only, one-time setup):</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-allow-all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>2. Enable isolation for a specific domain:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-enable &lt;example.com&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>3. Verify isolation is active:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>To disable isolation for a domain:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-disable &lt;example.com&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h3 id="command-reference" tabindex="-1"><a class="header-anchor" href="#command-reference" aria-hidden="true">#</a> Command Reference</h3><h4 id="server-wide-management" tabindex="-1"><a class="header-anchor" href="#server-wide-management" aria-hidden="true">#</a> Server-Wide Management</h4><h5 id="allow-website-isolation-for-all-users" tabindex="-1"><a class="header-anchor" href="#allow-website-isolation-for-all-users" aria-hidden="true">#</a> Allow Website Isolation for All Users</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-allow-all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Enables the Website Isolation feature server-wide in &quot;Allow All&quot; mode. All users are allowed to use Website Isolation by default (individual users can be denied with <code>--site-isolation-deny</code>).</p><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-allow-all
Website isolation was allowed for all users.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes:</strong></p><ul><li>Creates the feature flag at <code>/opt/cloudlinux/flags/enabled-flags.d/website-isolation.flag</code></li><li>Sets up the per-user denied directory at <code>/etc/cagefs/site-isolation.users.denied</code></li><li>Triggers a CageFS remount to apply necessary mount configurations</li><li>Registers the <code>cagefsctl-user</code> proxyexec command for user-level management</li><li>Must be run with root privileges</li></ul><hr><h5 id="deny-website-isolation-for-all-users" tabindex="-1"><a class="header-anchor" href="#deny-website-isolation-for-all-users" aria-hidden="true">#</a> Deny Website Isolation for All Users</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-deny-all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Disables the Website Isolation feature server-wide and switches to &quot;Deny All&quot; mode. Removes all domain isolation configurations for all users.</p><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-deny-all
Website isolation was denied for all users.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Warning:</strong> This command will:</p><ul><li>Disable isolation for all currently isolated domains</li><li>Remove all per-user isolation configurations</li><li>Terminate and restart affected PHP processes</li><li>Clean up token directories and overlay storage</li><li>Switch to &quot;Deny All&quot; mode</li></ul><hr><h4 id="per-user-management" tabindex="-1"><a class="header-anchor" href="#per-user-management" aria-hidden="true">#</a> Per-User Management</h4><p>Website Isolation uses a two-mode user model to control which users can use the feature:</p><ul><li><strong>Allow All mode</strong> (<code>allow_all</code>): All users are allowed by default. Individual users can be denied (added as exceptions).</li><li><strong>Deny All mode</strong> (<code>deny_all</code>): No users are allowed by default. Individual users can be allowed (added as exceptions).</li></ul><h5 id="allow-website-isolation-for-a-specific-user" tabindex="-1"><a class="header-anchor" href="#allow-website-isolation-for-a-specific-user" aria-hidden="true">#</a> Allow Website Isolation for a Specific User</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-allow &lt;username&gt; [&lt;username2&gt; ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Allows Website Isolation for one or more specific users.</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;username&gt;</code></td><td>Username(s) to allow Website Isolation for</td></tr></tbody></table><p><strong>Behavior depends on current mode:</strong></p><ul><li><strong>Allow All mode</strong>: Removes the user from the denied list (undoes a previous <code>--site-isolation-deny</code>)</li><li><strong>Deny All mode</strong>: Adds the user to the allowed list</li><li><strong>Not initialized</strong>: Sets up infrastructure in Deny All mode with the user as the first allowed user</li></ul><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-allow john
Website isolation was allowed for user(s): john

# cagefsctl --site-isolation-allow john jane
Website isolation was allowed for user(s): john, jane
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h5 id="deny-website-isolation-for-a-specific-user" tabindex="-1"><a class="header-anchor" href="#deny-website-isolation-for-a-specific-user" aria-hidden="true">#</a> Deny Website Isolation for a Specific User</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-deny &lt;username&gt; [&lt;username2&gt; ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Denies Website Isolation for one or more specific users and disables all their domain isolation.</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;username&gt;</code></td><td>Username(s) to deny Website Isolation for</td></tr></tbody></table><p><strong>Behavior depends on current mode:</strong></p><ul><li><strong>Allow All mode</strong>: Adds the user to the denied list</li><li><strong>Deny All mode</strong>: Removes the user from the allowed list (undoes a previous <code>--site-isolation-allow</code>)</li></ul><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-deny john
Website isolation was denied for user(s): john
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes:</strong></p><ul><li>Also cleans up all existing domain isolation for the denied user(s)</li><li>Website Isolation must be enabled server-wide first</li></ul><hr><h5 id="toggle-user-mode" tabindex="-1"><a class="header-anchor" href="#toggle-user-mode" aria-hidden="true">#</a> Toggle User Mode</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-toggle-mode
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Toggles the isolation user mode between &quot;Allow All&quot; and &quot;Deny All&quot; without modifying any per-user exception lists.</p><p><strong>Mode transitions:</strong></p><ul><li><code>allow_all</code> ‚Üí <code>deny_all</code></li><li><code>deny_all</code> ‚Üí <code>allow_all</code></li><li>Not initialized ‚Üí <code>allow_all</code></li></ul><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-toggle-mode
Website isolation user mode toggled to &#39;deny_all&#39;.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes:</strong></p><ul><li>Only flips the mode indicator directories</li><li>Does <strong>not</strong> clean up existing user isolation</li><li>Does <strong>not</strong> alter the per-user exception lists</li><li>Useful for quickly switching the default behavior without losing per-user configuration</li></ul><hr><h4 id="domain-level-management" tabindex="-1"><a class="header-anchor" href="#domain-level-management" aria-hidden="true">#</a> Domain-Level Management</h4><h5 id="enable-isolation-for-a-domain" tabindex="-1"><a class="header-anchor" href="#enable-isolation-for-a-domain" aria-hidden="true">#</a> Enable Isolation for a Domain</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-enable &lt;domain&gt; [&lt;domain2&gt; ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Enables Website Isolation for one or more specified domains.</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;domain&gt;</code></td><td>Domain name to isolate (e.g., <code>example.com</code>)</td></tr></tbody></table><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-enable example.com
Website isolation was enabled for domain(s),
example.com

# cagefsctl --site-isolation-enable site1.com site2.com
Website isolation was enabled for domain(s),
site1.com,site2.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Requirements:</strong></p><ul><li>Website Isolation must be allowed server-wide first</li><li>Website Isolation must be allowed for the domain&#39;s user</li><li>The domain must exist and be associated with a valid user account</li><li>Must be run with root privileges</li></ul><p><strong>What happens when isolation is enabled:</strong></p><ol><li>A unique website token directory is created</li><li>Overlay storage directory is configured for the website</li><li>User configuration is updated with the isolated domain</li><li>Per-domain PHP Selector configuration is set up (inheriting from user&#39;s PHP settings)</li><li>If this is the first isolated website for the user, CageFS is remounted</li><li>Existing PHP processes for the domain are terminated and restarted in isolation</li><li>Document root monitoring service is started</li></ol><hr><h5 id="disable-isolation-for-a-domain" tabindex="-1"><a class="header-anchor" href="#disable-isolation-for-a-domain" aria-hidden="true">#</a> Disable Isolation for a Domain</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-disable &lt;domain&gt; [&lt;domain2&gt; ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Disables Website Isolation for one or more specified domains.</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;domain&gt;</code></td><td>Domain name to remove from isolation</td></tr></tbody></table><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-disable example.com
Website isolation was disabled for domain(s),
example.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Requirements:</strong></p><ul><li>Must be run with root privileges</li></ul><p><strong>What happens when isolation is disabled:</strong></p><ol><li>Domain is removed from the user&#39;s isolation configuration</li><li>Mount configuration is regenerated</li><li>PHP processes for the domain are restarted outside of isolation</li><li>Token directories are cleaned up</li><li>If no users have any isolated domains left, the monitoring service is stopped</li></ol><hr><h4 id="monitoring-and-management" tabindex="-1"><a class="header-anchor" href="#monitoring-and-management" aria-hidden="true">#</a> Monitoring and Management</h4><h5 id="list-isolated-domains" tabindex="-1"><a class="header-anchor" href="#list-isolated-domains" aria-hidden="true">#</a> List Isolated Domains</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-list [&lt;username&gt; ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Lists all users and domains that have Website Isolation enabled.</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;username&gt;</code></td><td>(Optional) Filter results by specific user(s)</td></tr></tbody></table><p><strong>Example - List all isolated domains:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-list

Domains with enabled website isolation for user john:
example.com
mysite.org

Domains with enabled website isolation for user jane:
shop.example.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example - List isolated domains for specific user:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-list john

Domains with enabled website isolation for user john:
example.com
mysite.org
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output when no domains are isolated:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-list
No users with enabled Website isolation
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h5 id="regenerate-isolation-configuration" tabindex="-1"><a class="header-anchor" href="#regenerate-isolation-configuration" aria-hidden="true">#</a> Regenerate Isolation Configuration</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-regenerate &lt;username&gt; [&lt;username2&gt; ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Regenerates the Website Isolation configuration for specified users. Use this command after manual configuration changes or when troubleshooting isolation issues.</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;username&gt;</code></td><td>Username(s) to regenerate configuration for</td></tr></tbody></table><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-regenerate john jane
Regenerated configuration website isolation for users:
john
jane
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>When to use:</strong></p><ul><li>After domain document root changes</li><li>After domain renames or migrations</li><li>When isolation configuration appears out of sync</li><li>As part of troubleshooting steps recommended by support</li></ul><hr><h3 id="user-level-management" tabindex="-1"><a class="header-anchor" href="#user-level-management" aria-hidden="true">#</a> User-Level Management</h3><p>End users can manage Website Isolation for their own domains using the <code>cagefsctl-user</code> utility. This command runs inside CageFS via proxyexec and allows users to enable, disable, and list isolation for domains they own ‚Äî without requiring root access.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>User-level management requires that Website Isolation is allowed server-wide <strong>and</strong> allowed for the specific user by the server administrator.</p></div><h4 id="enable-isolation-for-a-domain-user-level" tabindex="-1"><a class="header-anchor" href="#enable-isolation-for-a-domain-user-level" aria-hidden="true">#</a> Enable Isolation for a Domain (User-Level)</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl-user site-isolation-enable --domain &lt;domain&gt;[,&lt;domain2&gt;,...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Enables Website Isolation for one or more domains owned by the calling user.</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>--domain</code></td><td>Comma-separated domain name(s) to enable isolation for</td></tr></tbody></table><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ cagefsctl-user site-isolation-enable --domain example.com
{&quot;result&quot;: &quot;success&quot;, &quot;enabled_sites&quot;: [&quot;example.com&quot;]}

$ cagefsctl-user site-isolation-enable --domain site1.com,site2.com
{&quot;result&quot;: &quot;success&quot;, &quot;enabled_sites&quot;: [&quot;site1.com&quot;, &quot;site2.com&quot;]}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes:</strong></p><ul><li>The user can only manage domains they own</li><li>Website Isolation must be allowed for the user by the server administrator</li></ul><hr><h4 id="disable-isolation-for-a-domain-user-level" tabindex="-1"><a class="header-anchor" href="#disable-isolation-for-a-domain-user-level" aria-hidden="true">#</a> Disable Isolation for a Domain (User-Level)</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl-user site-isolation-disable --domain &lt;domain&gt;[,&lt;domain2&gt;,...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Disables Website Isolation for one or more domains owned by the calling user.</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>--domain</code></td><td>Comma-separated domain name(s) to disable isolation for</td></tr></tbody></table><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ cagefsctl-user site-isolation-disable --domain example.com
{&quot;result&quot;: &quot;success&quot;, &quot;enabled_sites&quot;: []}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h4 id="list-isolated-domains-user-level" tabindex="-1"><a class="header-anchor" href="#list-isolated-domains-user-level" aria-hidden="true">#</a> List Isolated Domains (User-Level)</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl-user site-isolation-list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Lists all domains with Website Isolation enabled for the calling user.</p><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ cagefsctl-user site-isolation-list
{&quot;result&quot;: &quot;success&quot;, &quot;enabled_sites&quot;: [&quot;example.com&quot;, &quot;mysite.org&quot;]}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="executing-commands-in-an-isolated-site-context" tabindex="-1"><a class="header-anchor" href="#executing-commands-in-an-isolated-site-context" aria-hidden="true">#</a> Executing Commands in an Isolated Site Context</h3><p>The <code>cagefs_enter_site</code> utility allows executing a command inside CageFS in the context of a specific isolated website. This can be useful for debugging or running site-specific operations.</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefs_enter_site &lt;site&gt; &lt;command&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Parameters:</strong></p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;site&gt;</code></td><td>Document root path or domain name</td></tr><tr><td><code>&lt;command&gt;</code></td><td>Command to execute inside the site&#39;s CageFS</td></tr></tbody></table><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ cagefs_enter_site example.com /bin/ls /home/user/public_html
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>Notes:</strong></p><ul><li>This command cannot be run as root</li><li>The site parameter can be either a document root path or a domain name</li></ul><hr><h3 id="per-domain-php-selector" tabindex="-1"><a class="header-anchor" href="#per-domain-php-selector" aria-hidden="true">#</a> Per-Domain PHP Selector</h3><p>When Website Isolation is enabled for a domain, per-domain PHP Selector configuration is automatically set up. This allows each isolated website to have its own PHP version and module configuration, independent of other websites on the same account.</p><p><strong>Key behaviors:</strong></p><ul><li>When isolation is first enabled for a domain, the domain <strong>inherits</strong> the user&#39;s current PHP version and module settings</li><li>Each isolated domain stores its PHP selector configuration separately</li></ul><h4 id="setting-php-version-for-an-isolated-domain" tabindex="-1"><a class="header-anchor" href="#setting-php-version-for-an-isolated-domain" aria-hidden="true">#</a> Setting PHP Version for an Isolated Domain</h4><p>Use <code>selectorctl</code> with the <code>--domain</code> option to set the PHP version for a specific isolated domain:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>selectorctl --set-user-current=&lt;version&gt; --domain &lt;domain&gt; [--user &lt;username&gt;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="tip custom-block"><p class="custom-block-title">Note</p><p>The <code>--user</code> option is only required when running as root. When a regular user runs <code>selectorctl</code>, it operates on their own account automatically.</p></div><p><strong>Example</strong> ‚Äî set PHP 8.2 for <code>example.com</code>:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># As root:
selectorctl --set-user-current=8.2 --domain example.com --user john

# As the user:
selectorctl --set-user-current=8.2 --domain example.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="enabling-disabling-extensions-for-an-isolated-domain" tabindex="-1"><a class="header-anchor" href="#enabling-disabling-extensions-for-an-isolated-domain" aria-hidden="true">#</a> Enabling/Disabling Extensions for an Isolated Domain</h4><p>Use <code>selectorctl</code> with the <code>--domain</code> option to manage extensions per domain:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># Enable extensions
selectorctl --enable-user-extensions=&lt;ext1&gt;,&lt;ext2&gt; --version &lt;version&gt; --domain &lt;domain&gt; [--user &lt;username&gt;]

# Disable extensions
selectorctl --disable-user-extensions=&lt;ext1&gt;,&lt;ext2&gt; --version &lt;version&gt; --domain &lt;domain&gt; [--user &lt;username&gt;]

# List enabled extensions
selectorctl --list-user-extensions --version &lt;version&gt; --domain &lt;domain&gt; [--user &lt;username&gt;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="tip custom-block"><p class="custom-block-title">Note</p><p>The <code>--user</code> option is only required when running as root.</p></div><h3 id="troubleshooting" tabindex="-1"><a class="header-anchor" href="#troubleshooting" aria-hidden="true">#</a> Troubleshooting</h3><h4 id="common-issues" tabindex="-1"><a class="header-anchor" href="#common-issues" aria-hidden="true">#</a> Common Issues</h4><p><strong>&quot;Website isolation is not enabled&quot;</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># Solution: Allow server-wide first
cagefsctl --site-isolation-allow-all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>&quot;Website isolation feature is not available on this platform&quot;</strong></p><p>The server does not have the required packages installed. Ensure all <a href="#minimum-package-versions">prerequisite packages</a> are installed and up to date.</p><p><strong>&quot;Website isolation is not allowed for user &lt;username&gt;&quot;</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># Solution: Allow for the specific user
cagefsctl --site-isolation-allow &lt;username&gt;
# Or allow for all users
cagefsctl --site-isolation-allow-all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>&quot;Please specify existing domain name and try again&quot;</strong></p><ul><li>Verify the domain exists in the control panel</li><li>Check that the domain is associated with a valid user account</li></ul><hr><h3 id="integration-with-control-panels" tabindex="-1"><a class="header-anchor" href="#integration-with-control-panels" aria-hidden="true">#</a> Integration with Control Panels</h3><p>Website Isolation integrates automatically with supported control panels. When domains are:</p><ul><li><strong>Created</strong>: No automatic action (isolation must be explicitly enabled)</li><li><strong>Renamed</strong>: Isolation configuration is automatically updated</li><li><strong>Deleted</strong>: Isolation configuration is automatically cleaned up</li><li><strong>Document root changed</strong>: Configuration is regenerated via hooks</li></ul>`,181))])}const g=s(u,[["render",m],["__file","index.html.vue"]]);export{g as default};
