import{_ as s,S as n,n as o,p as r,a3 as t,q as l,J as i,C as d,A as c}from"./framework-3c337068.js";const u={};function m(h,e){const a=n("RouterLink");return o(),r("div",null,[e[2]||(e[2]=t('<h1 id="website-isolation-beta" tabindex="-1"><a class="header-anchor" href="#website-isolation-beta" aria-hidden="true">#</a> Website Isolation (BETA)</h1><h2 id="cagefs-per-domain" tabindex="-1"><a class="header-anchor" href="#cagefs-per-domain" aria-hidden="true">#</a> CageFS Per Domain</h2><p>Website Isolation is a security feature that provides domain-level isolation within CageFS. It allows server administrators to isolate individual websites from each other, even when they belong to the same hosting account. This prevents cross-site attacks where a compromised website could access files or data from other websites on the same account.</p><h3 id="overview" tabindex="-1"><a class="header-anchor" href="#overview" aria-hidden="true">#</a> Overview</h3><p>When Website Isolation is enabled for a domain:</p><ul><li>Each isolated website runs in its own isolated environment</li><li>PHP processes for isolated websites cannot access files from other websites</li><li>Crontab entries are automatically scoped to their respective document roots</li><li>Existing PHP processes are gracefully terminated and restarted in the isolated environment</li></ul><h3 id="prerequisites" tabindex="-1"><a class="header-anchor" href="#prerequisites" aria-hidden="true">#</a> Prerequisites</h3><h4 id="minimum-package-versions" tabindex="-1"><a class="header-anchor" href="#minimum-package-versions" aria-hidden="true">#</a> Minimum Package Versions</h4><table><thead><tr><th>Package</th><th>Minimum Version</th></tr></thead><tbody><tr><td>cagefs</td><td>7.6.29-1</td></tr><tr><td>lve (liblve)</td><td>2.2-1</td></tr><tr><td>lve-wrappers</td><td>0.7.13-1</td></tr><tr><td>alt-python27-cllib</td><td>3.4.33-1</td></tr></tbody></table><h4 id="compatible-php-handlers" tabindex="-1"><a class="header-anchor" href="#compatible-php-handlers" aria-hidden="true">#</a> Compatible PHP Handlers</h4><table><thead><tr><th>Handler</th><th>Status</th></tr></thead><tbody><tr><td>LSAPI</td><td>âœ… Supported (Recommended)</td></tr><tr><td>CGI</td><td>âœ… Supported</td></tr><tr><td>FPM</td><td>ðŸ”œ Coming in future releases</td></tr><tr><td>FCGI</td><td>ðŸ”œ Coming in future releases</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">Warning</p><p>Website Isolation currently supports LSAPI and CGI handlers only. FPM and FCGI support is planned for future releases</p></div><h4 id="compatible-control-panels" tabindex="-1"><a class="header-anchor" href="#compatible-control-panels" aria-hidden="true">#</a> Compatible Control Panels</h4><table><thead><tr><th>Handler</th><th>Status</th></tr></thead><tbody><tr><td>cPanel</td><td>âœ… Supported</td></tr><tr><td>Plesk</td><td>ðŸ”œ Coming in future releases</td></tr><tr><td>DirectAdmin</td><td>ðŸ”œ Coming in future releases</td></tr><tr><td>Integration Scripts*</td><td>âœ… Supported</td></tr></tbody></table>',14)),l("p",null,[e[1]||(e[1]=i("*",-1)),d(a,{to:"/cloudlinuxos/control_panel_integration/#control-panel-api-integration"},{default:c(()=>e[0]||(e[0]=[i("Control Panel Integration",-1)])),_:1,__:[0]})]),e[3]||(e[3]=t(`<hr><h3 id="quick-start" tabindex="-1"><a class="header-anchor" href="#quick-start" aria-hidden="true">#</a> Quick Start</h3><p>Follow these steps to enable Website Isolation for a domain:</p><p><strong>1. Enable the feature server-wide (administrator only, one-time setup):</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-allow
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>2. Enable isolation for a specific domain:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-enable &lt;example.com&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>3. Verify isolation is active:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-list
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>To disable isolation for a domain:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-disable &lt;example.com&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h3 id="command-reference" tabindex="-1"><a class="header-anchor" href="#command-reference" aria-hidden="true">#</a> Command Reference</h3><h5 id="enable-website-isolation-server-wide" tabindex="-1"><a class="header-anchor" href="#enable-website-isolation-server-wide" aria-hidden="true">#</a> Enable Website Isolation Server-Wide</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-allow
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Enables the Website Isolation feature server-wide. This must be executed by the server administrator before individual domains can be isolated.</p><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-allow
Website isolation was enabled server-wide.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Notes:</strong></p><ul><li>Creates the feature flag at <code>/opt/cloudlinux/flags/enabled-flags.d/website-isolation.flag</code></li><li>Triggers a CageFS remount to apply necessary mount configurations</li><li>Must be run with root privileges</li></ul><hr><h5 id="disable-website-isolation-server-wide" tabindex="-1"><a class="header-anchor" href="#disable-website-isolation-server-wide" aria-hidden="true">#</a> Disable Website Isolation Server-Wide</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-deny
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Disables the Website Isolation feature server-wide and removes all domain isolation configurations.</p><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-deny
Website isolation was disabled server-wide.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Warning:</strong> This command will:</p><ul><li>Disable isolation for all currently isolated domains</li><li>Remove all per-user isolation configurations</li><li>Terminate and restart affected PHP processes</li><li>Clean up token directories and overlay storage</li></ul><hr><h4 id="domain-level-management" tabindex="-1"><a class="header-anchor" href="#domain-level-management" aria-hidden="true">#</a> Domain-Level Management</h4><h5 id="enable-isolation-for-a-domain" tabindex="-1"><a class="header-anchor" href="#enable-isolation-for-a-domain" aria-hidden="true">#</a> Enable Isolation for a Domain</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-enable &lt;domain&gt; [&lt;domain2&gt; ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Enables Website Isolation for one or more specified domains.</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;domain&gt;</code></td><td>Domain name to isolate (e.g., <code>example.com</code>)</td></tr></tbody></table><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-enable example.com
Website isolation was enabled for domain(s),
&lt;example.com&gt;

# cagefsctl --site-isolation-enable site1.com site2.com
Website isolation was enabled for domain(s),
site1.com,site2.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Requirements:</strong></p><ul><li>Website Isolation must be enabled server-wide first</li><li>The domain must exist and be associated with a valid user account</li><li>Must be run with root privileges</li></ul><div class="tip custom-block"><p class="custom-block-title">Note</p><p>Currently, this command requires root execution. Future releases may allow end users to enable isolation for their own domains.</p></div><p><strong>What happens when isolation is enabled:</strong></p><ol><li>A unique website token directory is created</li><li>Overlay storage directory is configured for the website</li><li>User configuration is updated with the isolated domain</li><li>If this is the first isolated website for the user, CageFS is remounted</li><li>Existing PHP processes for the domain are terminated and restarted in isolation</li></ol><hr><h5 id="disable-isolation-for-a-domain" tabindex="-1"><a class="header-anchor" href="#disable-isolation-for-a-domain" aria-hidden="true">#</a> Disable Isolation for a Domain</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-disable &lt;domain&gt; [&lt;domain2&gt; ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Disables Website Isolation for one or more specified domains.</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;domain&gt;</code></td><td>Domain name to remove from isolation</td></tr></tbody></table><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-disable &lt;example.com&gt;
Website isolation was disabled for domain(s),
&lt;example.com&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Requirements:</strong></p><ul><li>Must be run with root privileges</li></ul><div class="tip custom-block"><p class="custom-block-title">Note</p><p>Currently, this command requires root execution. Future releases may allow end users to disable isolation for their own domains</p></div><p><strong>What happens when isolation is disabled:</strong></p><ol><li>Domain is removed from the user&#39;s isolation configuration</li><li>Mount configuration is regenerated</li><li>PHP processes for the domain are restarted outside of isolation</li><li>Token directories are cleaned up</li></ol><hr><h4 id="monitoring-and-management" tabindex="-1"><a class="header-anchor" href="#monitoring-and-management" aria-hidden="true">#</a> Monitoring and Management</h4><h5 id="list-isolated-domains" tabindex="-1"><a class="header-anchor" href="#list-isolated-domains" aria-hidden="true">#</a> List Isolated Domains</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-list [&lt;username&gt; ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Lists all users and domains that have Website Isolation enabled.</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;username&gt;</code></td><td>(Optional) Filter results by specific user(s)</td></tr></tbody></table><p><strong>Example - List all isolated domains:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-list

Domains with enabled website isolation for user john:
example.com
mysite.org

Domains with enabled website isolation for user jane:
shop.example.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Example - List isolated domains for specific user:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-list john

Domains with enabled website isolation for user john:
example.com
mysite.org
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Output when no domains are isolated:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-list
No users with enabled Website isolation
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h5 id="regenerate-isolation-configuration" tabindex="-1"><a class="header-anchor" href="#regenerate-isolation-configuration" aria-hidden="true">#</a> Regenerate Isolation Configuration</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cagefsctl --site-isolation-regenerate &lt;username&gt; [&lt;username2&gt; ...]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Regenerates the Website Isolation configuration for specified users. Use this command after manual configuration changes or when troubleshooting isolation issues.</p><p><strong>Parameters:</strong></p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;username&gt;</code></td><td>Username(s) to regenerate configuration for</td></tr></tbody></table><p><strong>Example:</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># cagefsctl --site-isolation-regenerate john jane
Regenerated configuration website isolation for users:
john
jane
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>When to use:</strong></p><ul><li>After domain document root changes</li><li>After domain renames or migrations</li><li>When isolation configuration appears out of sync</li><li>As part of troubleshooting steps recommended by support</li></ul><hr><h3 id="troubleshooting" tabindex="-1"><a class="header-anchor" href="#troubleshooting" aria-hidden="true">#</a> Troubleshooting</h3><h4 id="common-issues" tabindex="-1"><a class="header-anchor" href="#common-issues" aria-hidden="true">#</a> Common Issues</h4><p><strong>&quot;Website isolation is not enabled server-wide&quot;</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># Solution: Enable server-wide first
cagefsctl --site-isolation-allow
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>&quot;Please specify existing domain name and try again&quot;</strong></p><ul><li>Verify the domain exists in the control panel</li><li>Check that the domain is associated with a valid user account</li></ul><hr><h3 id="integration-with-control-panels" tabindex="-1"><a class="header-anchor" href="#integration-with-control-panels" aria-hidden="true">#</a> Integration with Control Panels</h3><p>Website Isolation integrates automatically with supported control panels. When domains are:</p><ul><li><strong>Created</strong>: No automatic action (isolation must be explicitly enabled)</li><li><strong>Renamed</strong>: Isolation configuration is automatically updated</li><li><strong>Deleted</strong>: Isolation configuration is automatically cleaned up</li><li><strong>Document root changed</strong>: Configuration is regenerated via hooks</li></ul>`,89))])}const b=s(u,[["render",m],["__file","index.html.vue"]]);export{b as default};
